<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>boşagidenhayat</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #sonuc {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div id="sonuc"></div>

    <script>
        const API_KEY = 'RGAPI-cb44b7dc-979b-45a7-a013-f2067c88e3f8';
        const PUUID = 'S9BD0gxdkE2--nQcnc9wI8uCJ3jdboMCJJXoRu1pExoUXyKP5nwbw-4PK2k6m0fe-3nB-MfwiDYfrA';

        async function macIDleriniAl() {
            try {
                const response = await fetch(`https://europe.api.riotgames.com/lol/match/v5/matches/by-puuid/${PUUID}/ids?start=0&count=100&api_key=${API_KEY}`);
                if (!response.ok) {
                    throw new Error(`HTTP hata: ${response.status} - ${await response.text()}`);
                }
                const macIDleri = await response.json();
                return macIDleri;
            } catch (hata) {
                throw new Error(`Maç ID'leri alınırken hata: ${hata.message}`);
            }
        }

        async function macBilgisiAl(macID) {
            try {
                const response = await fetch(`https://europe.api.riotgames.com/lol/match/v5/matches/${macID}?api_key=${API_KEY}`);
                if (!response.ok) {
                    throw new Error(`HTTP hata: ${response.status} - ${await response.text()}`);
                }
                const data = await response.json();
                return data.info.gameDuration;
            } catch (hata) {
                throw new Error(`Maç bilgisi alınırken hata (${macID}): ${hata.message}`);
            }
        }

        async function toplamSureyiHesapla() {
            const sonucDiv = document.getElementById('sonuc');
            let toplamSure = 0;
            let tamamlananMaclar = 0;

            try { 
                sonucDiv.innerHTML = '<p>Maç listesi alınıyor...</p>';
                const macIDleri = await macIDleriniAl();
                const toplamMacSayisi = macIDleri.length;

                sonucDiv.innerHTML = `<p>Toplam ${toplamMacSayisi} maç bulundu. İşleniyor...</p>`;

                for (const macID of macIDleri) {
                    try {
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        const sure = await macBilgisiAl(macID);
                        toplamSure += sure;
                        tamamlananMaclar++;
                        sonucDiv.innerHTML = `<p>İşlenen maç: ${tamamlananMaclar}/${macIDleri.length}</p>
                                            <p>Şu ana kadar toplam süre: ${Math.floor(toplamSure / 3600)} saat 
                                            ${Math.floor((toplamSure % 3600) / 60)} dakika</p>`;
                    } catch (macHatasi) {
                        console.error(`Maç işlenirken hata: ${macHatasi.message}`);
                        continue;
                    }
                }

                const saat = Math.floor(toplamSure / 3600);
                const dakika = Math.floor((toplamSure % 3600) / 60);
                const saniye = toplamSure % 60;
                sonucDiv.innerHTML = `<p>Toplam oyun süresi: ${saat} saat ${dakika} dakika ${saniye} saniye</p>`;
            } catch (hata) {
                sonucDiv.innerHTML = `<p style="color: red;">Hata oluştu: ${hata.message}</p>`;
                console.error('Hata detayı:', hata);
            }
        }

        window.onload = toplamSureyiHesapla;

        setInterval(function() {
            window.location.reload();
        }, 100000); 
    </script>
</body>
</html>
